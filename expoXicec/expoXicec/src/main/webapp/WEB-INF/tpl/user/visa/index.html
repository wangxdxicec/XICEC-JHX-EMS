<!DOCTYPE html>
<#import "/common/spring.ftl" as spring />
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="author" content="">

    <title><@spring.message "site"/></title>

    <#include "/common/common-js.html" />
    <!-- Custom styles for this template -->
    <link href="${resource}/bootstrap/b2/css/bootstrap.css" rel="stylesheet">
    <script src="${resource}/js/jquery.json-2.4.js"></script>
    <script src="${resource}/date/WdatePicker.js"></script>
    <style type="text/css">
        .table > tbody > tr > td {
            vertical-align: middle;
        }

        body {

            padding-bottom: 40px;
        }

        .sidebar-nav {
            padding: 9px 0;
        }

        @media (max-width: 980px) {
            /* Enable use of floated navbar text */
            .navbar-text.pull-right {
                float: none;
                padding-left: 5px;
                padding-right: 5px;
            }
        }
    </style>
</head>
<!-- Bootstrap core CSS -->

<body>
<#include "/user/header.html" />
<div style="width: 100%">
    <div class="row-fluid" style="width: 962px;margin: 0px auto;">
        <#include "/user/left.html" />
        <div style="width: 639px;float: left;margin-left: 31px;background-color: #ffffff;padding: 20px;">
            <!--<div class="alert alert-success">选择展商所属产品分类</div>-->
            <div class="panel panel-success">
                <div class="panel-heading">
                    <h3 class="panel-title"><@spring.message "visa.title"/></h3>
                </div>
                <div class="panel-body" style="min-height: 400px">
					<div class="alert alert-block">
                        <#if rc.locale=="zh_CN">
                            <p><a href="#" onclick="javascript:$('#readBefore').toggle();"><b>小贴士</b></a></p>
                            <li>
                                强烈建议参展商在<b>${tExhibitorTime.stone_fair_begin_year}年2月1日</b>之前取得入境签证。
                            </li>
                            <li>
                                <b>护照</b>到期日期应在${tExhibitorTime.stone_fair_begin_year}年9月份以后。
                            </li>
                            <li>
                                厦门石材展的官方邀请函由厦门市商务局签发。请注意：<b>它不是签证</b>。
                            </li>
                            <li>
                                <p><b>正式邀请函申请程序：</b></p>
                                <p>请咨询您附近的中国大使馆或领事如何申请入境签证。</p>
                                <p>如果申请材料需要正式邀请函：</p>
                                <p>1．点击“添加”来选择一个参展人员。</p>
                                <p>2．填写护照信息并提交。</p>
                                <p>3．做好邀请函需要7天。邀请函扫描将通过电子邮件发送，请注意查收。</p>
                            </li>
                            <li>
                                如果需要<b>邀请函原件</b>，请提供DHL/TNT/UPS/联邦快递的到付账号、您的详细地址、联系方式到：<a href="mailto:info@cxisf.com">info@cxisf.com</a>。快递费将由收件人支付。请至少预留7天时间来邮寄。
                            </li>
                            <li>
                                根据新政策，来自<b>巴基斯坦、土耳其、伊朗、孟加拉国、斯里兰卡</b>等的客户，我们只能帮助展商申请签证邀请函。（参观商请自行申请旅游签证）。请注意只能提交本公司员工的护照信息。否则后果自负。
                            </li>
                            <li>
                                如有其它疑问，请联系<a href="mailto:info@cxisf.com">info@cxisf.com</a>。
                            </li>
                         <#else>
                             <p><a href="#" onclick="javascript:$('#readBefore').toggle();"><b>Read Before Apply</b></a>
                             </p>
                             <ul id="readBefore">
                                 <li>
                                     Exhibitors from PAKISTAN, TURKEY, IRAN, BANGLADESH, SRI LANKA, etc. please try to send the participants who have been to our fair before. Those who apply to come to China for the first time will have to submit more documents and may be rejected.
                                     \</b>.
                                 </li>
                                 <li>
                                     Exhibitors are strongly advised to obtain VISA to China <b>before February 1,
                                     ${tExhibitorTime.stone_fair_begin_year}</b>.
                                 </li>
                                 <li>
                                     Date of expiry on the <b>passport</b> should be after October,
                                     ${tExhibitorTime.stone_fair_begin_year}.
                                 </li>
                                 <li>
                                     The Official Invitation Letter is released by Xiamen Municipal Bureau of Commerce.
                                     It is <b>NOT a Visa</b>.
                                 </li>
                                 <li>
                                     <p><b>Official Invitation Letter Application Procedure:</b></p>
                                     <p>Consult the Chinese Embassy or Consulate nearest you for applying VISA to
                                         China.</p>
                                     <p>If Official Invitation Letter is required in the application materials, do the
                                         follows:</p>
                                     <p>1. Click “Add” to choose a participant.</p>
                                     <p>2. Fill in the form and submit.</p>
                                     <p>3. Wait for the Invitation for 1 week. The scan of invitation will be sent by
                                         email.</p>
                                 </li>
                                 <li>
                                     If the <b>original invitation</b> is required, express deliveries by DHL, TNT,
                                     FEDEX, UPS etc. are available if paid by consignee. Please send your express
                                     address to <a href="mailto:info@cxisf.com">info@cxisf.com</a>. The delivery time
                                     should be counted in your Visa application.
                                 </li>
                                 <li>
                                     Please note that due to new Government Policy, we can only apply the visa invitations for <font color="#0088cc">exhibitors</font> from <b>PAKISTAN, TURKEY, IRAN, BANGLADESH, SRI LANKA</b>, etc.. (<font color="#0088cc">Visitors</font> should go to apply the travelling visa.) Please do not apply the visa invitation for anyone who isn’t working in your company, or suffer the consequences. Many thanks!
                                 </li>
                                 <li>
                                     Any further question, please contact <a href="mailto:info@cxisf.com">info@cxisf.com</a>.
                                 </li>
                             </ul>
                        </#if>

					</div>
                    <div style="float: right">
						<button id="addFromJoinerBtn" type="button" class="btn btn-warning"><@spring.message "visa.addFromJoiner"/></button>
                    </div>
                    <hr>
                    <table class="table table-striped" style="margin-top: 10px">
                        <thead>
                        <tr>
                            <th style="width: 100px"><@spring.message "info.joiner.participants.table.name"/></th>
                            <th><@spring.message "info.joiner.participants.table.passport"/></th>
                            <th><@spring.message "info.joiner.participants.table.status"/></th>
                            <th style="width: 150px"><@spring.message "info.joiner.participants.table.option"/></th>
                        </tr>
                        </thead>
                        <tbody id="datas">

                        </tbody>
                    </table>
                </div>
            </div>
            <!--/row-->
        </div>
        <!--/span-->
    </div>
    <!--/row-->
    <hr>
    <#include "/footer.html" />
</div>
<div class="modal hide fade" id="addFromJoiner" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
	 aria-hidden="true">
	<div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		<h4 class="modal-title"><@spring.message "visa.select.joiner"/></h4>
	</div>
	<div class="modal-body">
		<table class="table table-striped" id="addJoinerTable" style="margin-top: 10px">
			<thead>
			<tr style="text-align: center">
				<th style="width: 100px"><@spring.message "info.joiner.participants.table.select"/></th>
				<th style="width: 100px"><@spring.message "info.joiner.participants.table.name"/></th>
			</tr>
			</thead>
			<tbody id="addFromJoiners">
			</tbody>
		</table>
	</div>
	<div class="modal-footer">
		<button id="NextBtn" type="button" class="btn btn-success"><@spring.message "visa.addFromJoiner.next"/></button>
	</div>
</div>

<div class="modal hide fade" style="height: 492px" id="joiner" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true">
    <div class="modal-header" style="height: 31px; padding: 0px;">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title"><@spring.message "visa.addDialog.title"/></h4>
    </div>
    <div class="modal-body" style="max-height:430px; height: 430px; padding: 0px">
        <form class="form-horizontal" id="addJoinerForm" method="post" enctype="multipart/form-data" action="${base}/user/visa/saveVisa" target="postIframe">
            <div class="control-group" style="margin-bottom: 3px">
                <label class="control-label" style="width: 240px; margin-right: 25px"><@spring.message "visa.label.passportName"/></label>
                <div class="controls" style="margin-left: 240px">
                    <input type="text" name="passportName" placeholder='<@spring.message "visa.label.passportName"/>'>
                </div>
            </div>
            <div class="control-group" style="margin-bottom: 3px">
                <label class="control-label" style="width: 240px; margin-right: 25px"><@spring.message "visa.label.gender"/></label>
                <div class="controls" style="margin-left: 240px">
                    <select name="gender">
                        <option value="1"><@spring.message "gender.male"/></option>
                        <option value="2"><@spring.message "gender.female"/></option>
                    </select>
                </div>
            </div>
            <div class="control-group" style="margin-bottom: 3px">
                <label class="control-label" style="width: 240px; margin-right: 25px"><@spring.message "visa.label.nationality"/></label>
                <div class="controls" style="margin-left: 240px">
                    <select name="nationality">
                        <option value="">-- select one --</option>
                        <option value="afghan">Afghan</option>
                        <option value="albanian">Albanian</option>
                        <option value="algerian">Algerian</option>
                        <option value="american">American</option>
                        <option value="andorran">Andorran</option>
                        <option value="angolan">Angolan</option>
                        <option value="antiguans">Antiguans</option>
                        <option value="argentinean">Argentinean</option>
                        <option value="armenian">Armenian</option>
                        <option value="australian">Australian</option>
                        <option value="austrian">Austrian</option>
                        <option value="azerbaijani">Azerbaijani</option>
                        <option value="bahamian">Bahamian</option>
                        <option value="bahraini">Bahraini</option>
                        <option value="bangladeshi">Bangladeshi</option>
                        <option value="barbadian">Barbadian</option>
                        <option value="barbudans">Barbudans</option>
                        <option value="batswana">Batswana</option>
                        <option value="belarusian">Belarusian</option>
                        <option value="belgian">Belgian</option>
                        <option value="belizean">Belizean</option>
                        <option value="beninese">Beninese</option>
                        <option value="bhutanese">Bhutanese</option>
                        <option value="bolivian">Bolivian</option>
                        <option value="bosnian">Bosnian</option>
                        <option value="brazilian">Brazilian</option>
                        <option value="british">British</option>
                        <option value="bruneian">Bruneian</option>
                        <option value="bulgarian">Bulgarian</option>
                        <option value="burkinabe">Burkinabe</option>
                        <option value="burmese">Burmese</option>
                        <option value="burundian">Burundian</option>
                        <option value="cambodian">Cambodian</option>
                        <option value="cameroonian">Cameroonian</option>
                        <option value="canadian">Canadian</option>
                        <option value="cape verdean">Cape Verdean</option>
                        <option value="central african">Central African</option>
                        <option value="chadian">Chadian</option>
                        <option value="chilean">Chilean</option>
                        <option value="chinese">Chinese</option>
                        <option value="colombian">Colombian</option>
                        <option value="comoran">Comoran</option>
                        <option value="congolese">Congolese</option>
                        <option value="costa rican">Costa Rican</option>
                        <option value="croatian">Croatian</option>
                        <option value="cuban">Cuban</option>
                        <option value="cypriot">Cypriot</option>
                        <option value="czech">Czech</option>
                        <option value="danish">Danish</option>
                        <option value="djibouti">Djibouti</option>
                        <option value="dominican">Dominican</option>
                        <option value="dutch">Dutch</option>
                        <option value="east timorese">East Timorese</option>
                        <option value="ecuadorean">Ecuadorean</option>
                        <option value="egyptian">Egyptian</option>
                        <option value="emirian">Emirian</option>
                        <option value="equatorial guinean">Equatorial Guinean</option>
                        <option value="eritrean">Eritrean</option>
                        <option value="estonian">Estonian</option>
                        <option value="ethiopian">Ethiopian</option>
                        <option value="fijian">Fijian</option>
                        <option value="filipino">Filipino</option>
                        <option value="finnish">Finnish</option>
                        <option value="french">French</option>
                        <option value="gabonese">Gabonese</option>
                        <option value="gambian">Gambian</option>
                        <option value="georgian">Georgian</option>
                        <option value="german">German</option>
                        <option value="ghanaian">Ghanaian</option>
                        <option value="greek">Greek</option>
                        <option value="grenadian">Grenadian</option>
                        <option value="guatemalan">Guatemalan</option>
                        <option value="guinea-bissauan">Guinea-Bissauan</option>
                        <option value="guinean">Guinean</option>
                        <option value="guyanese">Guyanese</option>
                        <option value="haitian">Haitian</option>
                        <option value="herzegovinian">Herzegovinian</option>
                        <option value="honduran">Honduran</option>
                        <option value="hungarian">Hungarian</option>
                        <option value="icelander">Icelander</option>
                        <option value="indian">Indian</option>
                        <option value="indonesian">Indonesian</option>
                        <option value="iranian">Iranian</option>
                        <option value="iraqi">Iraqi</option>
                        <option value="irish">Irish</option>
                        <option value="israeli">Israeli</option>
                        <option value="italian">Italian</option>
                        <option value="ivorian">Ivorian</option>
                        <option value="jamaican">Jamaican</option>
                        <option value="japanese">Japanese</option>
                        <option value="jordanian">Jordanian</option>
                        <option value="kazakhstani">Kazakhstani</option>
                        <option value="kenyan">Kenyan</option>
                        <option value="kittian and nevisian">Kittian and Nevisian</option>
                        <option value="kuwaiti">Kuwaiti</option>
                        <option value="kyrgyz">Kyrgyz</option>
                        <option value="laotian">Laotian</option>
                        <option value="latvian">Latvian</option>
                        <option value="lebanese">Lebanese</option>
                        <option value="liberian">Liberian</option>
                        <option value="libyan">Libyan</option>
                        <option value="liechtensteiner">Liechtensteiner</option>
                        <option value="lithuanian">Lithuanian</option>
                        <option value="luxembourger">Luxembourger</option>
                        <option value="macedonian">Macedonian</option>
                        <option value="malagasy">Malagasy</option>
                        <option value="malawian">Malawian</option>
                        <option value="malaysian">Malaysian</option>
                        <option value="maldivan">Maldivan</option>
                        <option value="malian">Malian</option>
                        <option value="maltese">Maltese</option>
                        <option value="marshallese">Marshallese</option>
                        <option value="mauritanian">Mauritanian</option>
                        <option value="mauritian">Mauritian</option>
                        <option value="mexican">Mexican</option>
                        <option value="micronesian">Micronesian</option>
                        <option value="moldovan">Moldovan</option>
                        <option value="monacan">Monacan</option>
                        <option value="mongolian">Mongolian</option>
                        <option value="moroccan">Moroccan</option>
                        <option value="mosotho">Mosotho</option>
                        <option value="motswana">Motswana</option>
                        <option value="mozambican">Mozambican</option>
                        <option value="namibian">Namibian</option>
                        <option value="nauruan">Nauruan</option>
                        <option value="nepalese">Nepalese</option>
                        <option value="new zealander">New Zealander</option>
                        <option value="ni-vanuatu">Ni-Vanuatu</option>
                        <option value="nicaraguan">Nicaraguan</option>
                        <option value="nigerien">Nigerien</option>
                        <option value="north korean">North Korean</option>
                        <option value="northern irish">Northern Irish</option>
                        <option value="norwegian">Norwegian</option>
                        <option value="omani">Omani</option>
                        <option value="pakistani">Pakistani</option>
                        <option value="palauan">Palauan</option>
                        <option value="panamanian">Panamanian</option>
                        <option value="papua new guinean">Papua New Guinean</option>
                        <option value="paraguayan">Paraguayan</option>
                        <option value="peruvian">Peruvian</option>
                        <option value="polish">Polish</option>
                        <option value="portuguese">Portuguese</option>
                        <option value="qatari">Qatari</option>
                        <option value="romanian">Romanian</option>
                        <option value="russian">Russian</option>
                        <option value="rwandan">Rwandan</option>
                        <option value="saint lucian">Saint Lucian</option>
                        <option value="salvadoran">Salvadoran</option>
                        <option value="samoan">Samoan</option>
                        <option value="san marinese">San Marinese</option>
                        <option value="sao tomean">Sao Tomean</option>
                        <option value="saudi">Saudi</option>
                        <option value="scottish">Scottish</option>
                        <option value="senegalese">Senegalese</option>
                        <option value="serbian">Serbian</option>
                        <option value="seychellois">Seychellois</option>
                        <option value="sierra leonean">Sierra Leonean</option>
                        <option value="singaporean">Singaporean</option>
                        <option value="slovakian">Slovakian</option>
                        <option value="slovenian">Slovenian</option>
                        <option value="solomon islander">Solomon Islander</option>
                        <option value="somali">Somali</option>
                        <option value="south african">South African</option>
                        <option value="south korean">South Korean</option>
                        <option value="spanish">Spanish</option>
                        <option value="sri lankan">Sri Lankan</option>
                        <option value="sudanese">Sudanese</option>
                        <option value="surinamer">Surinamer</option>
                        <option value="swazi">Swazi</option>
                        <option value="swedish">Swedish</option>
                        <option value="swiss">Swiss</option>
                        <option value="syrian">Syrian</option>
                        <option value="taiwanese">Taiwanese</option>
                        <option value="tajik">Tajik</option>
                        <option value="tanzanian">Tanzanian</option>
                        <option value="thai">Thai</option>
                        <option value="togolese">Togolese</option>
                        <option value="tongan">Tongan</option>
                        <option value="trinidadian or tobagonian">Trinidadian or Tobagonian</option>
                        <option value="tunisian">Tunisian</option>
                        <option value="turkish">Turkish</option>
                        <option value="tuvaluan">Tuvaluan</option>
                        <option value="ugandan">Ugandan</option>
                        <option value="ukrainian">Ukrainian</option>
                        <option value="uruguayan">Uruguayan</option>
                        <option value="uzbekistani">Uzbekistani</option>
                        <option value="venezuelan">Venezuelan</option>
                        <option value="vietnamese">Vietnamese</option>
                        <option value="welsh">Welsh</option>
                        <option value="yemenite">Yemenite</option>
                        <option value="zambian">Zambian</option>
                        <option value="zimbabwean">Zimbabwean</option>
                    </select>
                </div>
            </div>
			<div class="control-group" style="margin-bottom: 3px">
				<label class="control-label" style="width: 240px; margin-right: 25px"><@spring.message "visa.label.passportNo"/></label>
				<div class="controls" style="margin-left: 240px">
					<input type="text" name="passportNo" placeholder='<@spring.message "visa.label.passportNo"/>'>
				</div>
			</div>
			<div class="control-group" style="margin-bottom: 3px">
				<label class="control-label" style="width: 240px; margin-right: 25px"><@spring.message "visa.label.expDate"/></label>
				<div class="controls" style="margin-left: 240px">
					<!--<input type="text" readonly="readonly" class="Wdate" onClick="WdatePicker()" name="expireDate" placeholder='<@spring.message "visa.label.expDate"/>'>-->
                    <input type="text" class="Wdate" onClick="WdatePicker()" name="expireDate" placeholder='<@spring.message "visa.label.expDate"/>'>
				</div>
			</div>
			<div class="control-group" style="margin-bottom: 3px">
				<label class="control-label" style="width: 240px; margin-right: 25px"><@spring.message "visa.label.birth"/></label>
				<div class="controls" style="margin-left: 240px">
					<!--<input type="text" readonly="readonly" class="Wdate" onClick="WdatePicker()" name="birthDay" placeholder='<@spring.message "visa.label.birth"/>'>-->
                    <input type="text" class="Wdate" onClick="WdatePicker()" name="birthDay" placeholder='<@spring.message "visa.label.birth"/>'>
				</div>
			</div>
			<div class="control-group" style="margin-bottom: 3px">
				<label class="control-label" style="width: 240px"><@spring.message "visa.label.whereApplyVisa"/></label>
			</div>
            <div class="control-group" style="margin-bottom: 3px">
                <label class="control-label" style="width: 240px; margin-right: 25px"><@spring.message "visa.label.applyFor"/></label>
                <div class="controls" style="margin-left: 240px">
                    <input type="text" name="applyFor" placeholder='<@spring.message "visa.label.applyFor"/>'>
                </div>
            </div>
			<div class="control-group" style="margin-bottom: 3px">
				<label class="control-label" style="width: 240px"><@spring.message "visa.label.DurationStay"/></label>
			</div>
            <div class="control-group" style="margin-bottom: 3px">
                <label class="control-label" style="width: 240px; margin-right: 25px"><@spring.message "visa.label.from"/></label>
                <div class="controls" style="margin-left: 240px">
                    <!--<input type="text" readonly="readonly" class="Wdate" onClick="WdatePicker()" name="fromDate" placeholder='<@spring.message "visa.label.from"/>'>-->
                    <input type="text" class="Wdate" onClick="WdatePicker()" name="fromDate" placeholder='<@spring.message "visa.label.from"/>'>
                </div>
            </div>
            <div class="control-group" style="margin-bottom: 3px">
                <label class="control-label" style="width: 240px; margin-right: 25px"><@spring.message "visa.label.to"/></label>
                <div class="controls" style="margin-left: 240px">
                    <!--<input type="text" readonly="readonly" class="Wdate" onClick="WdatePicker()" name="toDate" placeholder='<@spring.message "visa.label.to"/>'>-->
                    <input type="text" class="Wdate" onClick="WdatePicker()" name="toDate" placeholder='<@spring.message "visa.label.to"/>'>
                </div>
            </div>

            <div class="control-group" style="margin-bottom: 3px">
                <label class="control-label" style="width: 240px; margin-right: 25px"><@spring.message "visa.hotel.address"/></label>
                <div class="controls" style="margin-left: 240px">
                    <input type="text" name="hotelAddress" placeholder='<@spring.message "visa.hotel.address"/>'><span style="font-weight: bolder;color: red;padding-left: 5px;">*</span>
                </div>
            </div>

            <div class="control-group" style="margin-bottom: 3px">
                <label class="control-label" style="width: 480px; margin-right: 25px; text-align:left"><@spring.message "visa.hotel.addressEx"/></label>
                <div class="controls" style="margin-left: 480px">
                    <label class="control-label" style="width: 20px; margin-right: 25px"></label>
                </div>
            </div>

            <div class="control-group" style="margin-bottom: 3px">
                <label class="control-label" style="width: 240px; margin-right: 25px"><@spring.message "visa.label.passportPage"/><font color="#dc143c">
                    <#if rc.locale=="zh_CN">
                        点击选择文件，提交新的护照首页(1M以下, 只支持jpg或者jpeg格式)
                    <#else>
                        Click "Choose file" to upload a new passport copy
                    </#if>
                </font></label>
                <div class="controls" style="margin-left: 240px">
                    <input type="file" name="passportPageFile" id="passportPageFile" placeholder='<@spring.message "visa.label.passportPage"/>' onchange="change()">
                </div>
            </div>
       		<input type="hidden" name="joinerId" id="addJoinerId">
        </form>
    </div>
    <div class="modal-footer" style="height: 31px; padding: 0px">
        <button type="button" class="btn btn-default" data-dismiss="modal"><@spring.message "info.joiner.participants.add.close"/></button>
        <button type="button" class="btn btn-primary" id="saveJoiner"><@spring.message "info.joiner.participants.add.save"/></button>
    </div>
</div>
<div class="modal hide fade" id="modifyJoinerDialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="myModalLabel"><@spring.message "info.joiner.participants.edit.title"/></h4>
    </div>
    <div class="modal-body">
        <form class="form-horizontal" role="form" id="modifyJoinerForm" target="postIframe" method="post" enctype="multipart/form-data" action="${base}/user/visa/saveVisa1">
            <div class="control-group">
                <label class="control-label"><@spring.message "visa.label.passportName"/></label>
                <div class="controls">
                    <input type="text" name="passportName" placeholder='<@spring.message "visa.label.passportName"/>'>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label"><@spring.message "visa.label.gender"/></label>
                <div class="controls">
                    <select name="gender">
                        <option value="1"><@spring.message "gender.male"/></option>
                        <option value="2"><@spring.message "gender.female"/></option>
                    </select>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label"><@spring.message "visa.label.nationality"/></label>
                <div class="controls">
                    <select name="nationality">
                        <option value="">-- select one --</option>
                        <option value="afghan">Afghan</option>
                        <option value="albanian">Albanian</option>
                        <option value="algerian">Algerian</option>
                        <option value="american">American</option>
                        <option value="andorran">Andorran</option>
                        <option value="angolan">Angolan</option>
                        <option value="antiguans">Antiguans</option>
                        <option value="argentinean">Argentinean</option>
                        <option value="armenian">Armenian</option>
                        <option value="australian">Australian</option>
                        <option value="austrian">Austrian</option>
                        <option value="azerbaijani">Azerbaijani</option>
                        <option value="bahamian">Bahamian</option>
                        <option value="bahraini">Bahraini</option>
                        <option value="bangladeshi">Bangladeshi</option>
                        <option value="barbadian">Barbadian</option>
                        <option value="barbudans">Barbudans</option>
                        <option value="batswana">Batswana</option>
                        <option value="belarusian">Belarusian</option>
                        <option value="belgian">Belgian</option>
                        <option value="belizean">Belizean</option>
                        <option value="beninese">Beninese</option>
                        <option value="bhutanese">Bhutanese</option>
                        <option value="bolivian">Bolivian</option>
                        <option value="bosnian">Bosnian</option>
                        <option value="brazilian">Brazilian</option>
                        <option value="british">British</option>
                        <option value="bruneian">Bruneian</option>
                        <option value="bulgarian">Bulgarian</option>
                        <option value="burkinabe">Burkinabe</option>
                        <option value="burmese">Burmese</option>
                        <option value="burundian">Burundian</option>
                        <option value="cambodian">Cambodian</option>
                        <option value="cameroonian">Cameroonian</option>
                        <option value="canadian">Canadian</option>
                        <option value="cape verdean">Cape Verdean</option>
                        <option value="central african">Central African</option>
                        <option value="chadian">Chadian</option>
                        <option value="chilean">Chilean</option>
                        <option value="chinese">Chinese</option>
                        <option value="colombian">Colombian</option>
                        <option value="comoran">Comoran</option>
                        <option value="congolese">Congolese</option>
                        <option value="costa rican">Costa Rican</option>
                        <option value="croatian">Croatian</option>
                        <option value="cuban">Cuban</option>
                        <option value="cypriot">Cypriot</option>
                        <option value="czech">Czech</option>
                        <option value="danish">Danish</option>
                        <option value="djibouti">Djibouti</option>
                        <option value="dominican">Dominican</option>
                        <option value="dutch">Dutch</option>
                        <option value="east timorese">East Timorese</option>
                        <option value="ecuadorean">Ecuadorean</option>
                        <option value="egyptian">Egyptian</option>
                        <option value="emirian">Emirian</option>
                        <option value="equatorial guinean">Equatorial Guinean</option>
                        <option value="eritrean">Eritrean</option>
                        <option value="estonian">Estonian</option>
                        <option value="ethiopian">Ethiopian</option>
                        <option value="fijian">Fijian</option>
                        <option value="filipino">Filipino</option>
                        <option value="finnish">Finnish</option>
                        <option value="french">French</option>
                        <option value="gabonese">Gabonese</option>
                        <option value="gambian">Gambian</option>
                        <option value="georgian">Georgian</option>
                        <option value="german">German</option>
                        <option value="ghanaian">Ghanaian</option>
                        <option value="greek">Greek</option>
                        <option value="grenadian">Grenadian</option>
                        <option value="guatemalan">Guatemalan</option>
                        <option value="guinea-bissauan">Guinea-Bissauan</option>
                        <option value="guinean">Guinean</option>
                        <option value="guyanese">Guyanese</option>
                        <option value="haitian">Haitian</option>
                        <option value="herzegovinian">Herzegovinian</option>
                        <option value="honduran">Honduran</option>
                        <option value="hungarian">Hungarian</option>
                        <option value="icelander">Icelander</option>
                        <option value="indian">Indian</option>
                        <option value="indonesian">Indonesian</option>
                        <option value="iranian">Iranian</option>
                        <option value="iraqi">Iraqi</option>
                        <option value="irish">Irish</option>
                        <option value="israeli">Israeli</option>
                        <option value="italian">Italian</option>
                        <option value="ivorian">Ivorian</option>
                        <option value="jamaican">Jamaican</option>
                        <option value="japanese">Japanese</option>
                        <option value="jordanian">Jordanian</option>
                        <option value="kazakhstani">Kazakhstani</option>
                        <option value="kenyan">Kenyan</option>
                        <option value="kittian and nevisian">Kittian and Nevisian</option>
                        <option value="kuwaiti">Kuwaiti</option>
                        <option value="kyrgyz">Kyrgyz</option>
                        <option value="laotian">Laotian</option>
                        <option value="latvian">Latvian</option>
                        <option value="lebanese">Lebanese</option>
                        <option value="liberian">Liberian</option>
                        <option value="libyan">Libyan</option>
                        <option value="liechtensteiner">Liechtensteiner</option>
                        <option value="lithuanian">Lithuanian</option>
                        <option value="luxembourger">Luxembourger</option>
                        <option value="macedonian">Macedonian</option>
                        <option value="malagasy">Malagasy</option>
                        <option value="malawian">Malawian</option>
                        <option value="malaysian">Malaysian</option>
                        <option value="maldivan">Maldivan</option>
                        <option value="malian">Malian</option>
                        <option value="maltese">Maltese</option>
                        <option value="marshallese">Marshallese</option>
                        <option value="mauritanian">Mauritanian</option>
                        <option value="mauritian">Mauritian</option>
                        <option value="mexican">Mexican</option>
                        <option value="micronesian">Micronesian</option>
                        <option value="moldovan">Moldovan</option>
                        <option value="monacan">Monacan</option>
                        <option value="mongolian">Mongolian</option>
                        <option value="moroccan">Moroccan</option>
                        <option value="mosotho">Mosotho</option>
                        <option value="motswana">Motswana</option>
                        <option value="mozambican">Mozambican</option>
                        <option value="namibian">Namibian</option>
                        <option value="nauruan">Nauruan</option>
                        <option value="nepalese">Nepalese</option>
                        <option value="new zealander">New Zealander</option>
                        <option value="ni-vanuatu">Ni-Vanuatu</option>
                        <option value="nicaraguan">Nicaraguan</option>
                        <option value="nigerien">Nigerien</option>
                        <option value="north korean">North Korean</option>
                        <option value="northern irish">Northern Irish</option>
                        <option value="norwegian">Norwegian</option>
                        <option value="omani">Omani</option>
                        <option value="pakistani">Pakistani</option>
                        <option value="palauan">Palauan</option>
                        <option value="panamanian">Panamanian</option>
                        <option value="papua new guinean">Papua New Guinean</option>
                        <option value="paraguayan">Paraguayan</option>
                        <option value="peruvian">Peruvian</option>
                        <option value="polish">Polish</option>
                        <option value="portuguese">Portuguese</option>
                        <option value="qatari">Qatari</option>
                        <option value="romanian">Romanian</option>
                        <option value="russian">Russian</option>
                        <option value="rwandan">Rwandan</option>
                        <option value="saint lucian">Saint Lucian</option>
                        <option value="salvadoran">Salvadoran</option>
                        <option value="samoan">Samoan</option>
                        <option value="san marinese">San Marinese</option>
                        <option value="sao tomean">Sao Tomean</option>
                        <option value="saudi">Saudi</option>
                        <option value="scottish">Scottish</option>
                        <option value="senegalese">Senegalese</option>
                        <option value="serbian">Serbian</option>
                        <option value="seychellois">Seychellois</option>
                        <option value="sierra leonean">Sierra Leonean</option>
                        <option value="singaporean">Singaporean</option>
                        <option value="slovakian">Slovakian</option>
                        <option value="slovenian">Slovenian</option>
                        <option value="solomon islander">Solomon Islander</option>
                        <option value="somali">Somali</option>
                        <option value="south african">South African</option>
                        <option value="south korean">South Korean</option>
                        <option value="spanish">Spanish</option>
                        <option value="sri lankan">Sri Lankan</option>
                        <option value="sudanese">Sudanese</option>
                        <option value="surinamer">Surinamer</option>
                        <option value="swazi">Swazi</option>
                        <option value="swedish">Swedish</option>
                        <option value="swiss">Swiss</option>
                        <option value="syrian">Syrian</option>
                        <option value="taiwanese">Taiwanese</option>
                        <option value="tajik">Tajik</option>
                        <option value="tanzanian">Tanzanian</option>
                        <option value="thai">Thai</option>
                        <option value="togolese">Togolese</option>
                        <option value="tongan">Tongan</option>
                        <option value="trinidadian or tobagonian">Trinidadian or Tobagonian</option>
                        <option value="tunisian">Tunisian</option>
                        <option value="turkish">Turkish</option>
                        <option value="tuvaluan">Tuvaluan</option>
                        <option value="ugandan">Ugandan</option>
                        <option value="ukrainian">Ukrainian</option>
                        <option value="uruguayan">Uruguayan</option>
                        <option value="uzbekistani">Uzbekistani</option>
                        <option value="venezuelan">Venezuelan</option>
                        <option value="vietnamese">Vietnamese</option>
                        <option value="welsh">Welsh</option>
                        <option value="yemenite">Yemenite</option>
                        <option value="zambian">Zambian</option>
                        <option value="zimbabwean">Zimbabwean</option>
                    </select>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label"><@spring.message "visa.label.passportNo"/></label>
                <div class="controls">
                    <input type="text" name="passportNo" placeholder='<@spring.message "visa.label.passportNo"/>'>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label"><@spring.message "visa.label.expDate"/></label>
                <div class="controls">
                    <input type="text" readonly="readonly" class="Wdate" onClick="WdatePicker()" name="expireDate" placeholder='<@spring.message "visa.label.expDate"/>'>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label"><@spring.message "visa.label.birth"/></label>
                <div class="controls">
                    <input type="text" readonly="readonly" class="Wdate" onClick="WdatePicker()" name="birthDay" placeholder='<@spring.message "visa.label.birth"/>'>
                </div>
            </div>
			<div class="control-group">
				<label class="control-label"><@spring.message "visa.label.whereApplyVisa"/></label>
			</div>
			<!--<div class="control-group">
				<label class="control-label"><@spring.message "visa.label.address"/></label>
				<div class="controls">
					<input type="text" name="address" placeholder='<@spring.message "visa.label.address"/>'>
				</div>
			</div>-->
            <div class="control-group">
                <label class="control-label"><@spring.message "visa.label.applyFor"/></label>
                <div class="controls">
                    <input type="text" name="applyFor" placeholder='<@spring.message "visa.label.applyFor"/>'>
                </div>
            </div>
			<div class="control-group">
				<label class="control-label"><@spring.message "visa.label.DurationStay"/></label>
			</div>
            <div class="control-group">
                <label class="control-label"><@spring.message "visa.label.from"/></label>
                <div class="controls">
                    <input type="text" readonly="readonly" class="Wdate" onClick="WdatePicker()" name="fromDate" placeholder='<@spring.message "visa.label.from"/>'>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label"><@spring.message "visa.label.to"/></label>
                <div class="controls">
                    <input type="text" readonly="readonly" class="Wdate" onClick="WdatePicker()" name="toDate" placeholder='<@spring.message "visa.label.to"/>'>
                </div>
            </div>

            <div class="control-group">
                <label class="control-label"><@spring.message "visa.hotel.address"/></label>
                <div class="controls">
                    <input type="text" name="hotelAddress" placeholder='<@spring.message "visa.hotel.address"/>'><span style="font-weight: bolder;color: red;padding-left: 5px;">*</span>
                </div>
            </div>

            <div class="control-group" style="margin-bottom: 3px">
                <label class="control-label" style="width: 480px; margin-right: 25px; text-align:left"><@spring.message "visa.hotel.addressEx"/></label>
                <div class="controls" style="margin-left: 480px">
                    <label class="control-label" style="width: 20px; margin-right: 25px"></label>
                </div>
            </div>

            <div class="control-group">
                <label class="control-label"><@spring.message "visa.label.passportPage"/></label>
                <div class="controls">
                    <a id="viewPassportPage" target="_blank" href="">
                        <#if rc.locale=="zh_CN">
                            点击这里查看以前提交的护照首页
                        <#else>
                            Click here to view the old passport copy <font color="#dc143c">(less than 1M, only support jpg or jpeg file)</font>
                        </#if>
                    </a>
                    <input type="file" name="passportPageFile1" id="passportPageFile1" placeholder='<@spring.message "visa.label.passportPage"/>' onchange="change1()">
                </div>
            </div>
            <!--<div class="control-group">-->
                <!--<label class="control-label"><@spring.message "visa.label.businessLicense"/></label>-->
                <!--<div class="controls">-->
                    <!--<a id="viewLicense" target="_blank" href="">Click to view has been uploaded picture</a>-->
                    <!--<input type="file" name="license" placeholder='<@spring.message "visa.label.businessLicense"/>'>-->
                <!--</div>-->
            <!--</div>-->
            <input type="hidden" name="id">
            <input type="hidden" name="eid">
            <input type="hidden" name="joinerId" id="modifyJoinerId">
            <!--<input type="hidden" name="businessLicense">-->
            <input type="hidden" name="passportPage">
        </form>

    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal"><@spring.message "info.joiner.participants.edit.close"/></button>
        <button type="button" class="btn btn-primary" id="modifyJoiner"><@spring.message "info.joiner.participants.edit.save"/></button>
    </div>
</div>
<div class="modal hide fade" id="confirm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title"><@spring.message "close"/></h4>
            </div>
            <div class="modal-body">
                <h5><@spring.message "sureToDelete"/></h5>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal"><@spring.message "close"/></button>
                <button type="button" class="btn btn-danger" id="confirmDelete"><@spring.message "yes"/></button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<iframe id="postIframe" name="postIframe" style="display: none"></iframe>
<script>
	function loadJoiners() {
		$("#addFromJoiners").html("")
		$.ajax({
			url: "${base}/user/queryJoiners",
			type: "POST",
			data: {"flag": "1"},
			dataType: "json",
			success: function (data) {
				if (data.resultCode == 0) {
					joiners = data.joiners;
					if(joiners.length == 0) {
						$("#addFromJoiners").append( '<tr>'
														+'<td colspan="2">Please finish your participant list first.</td>'
													+'</tr>');
						$("#NextBtn").attr({"disabled":"disabled"});
						return;
					}
					for (var i in joiners) {
						var joiner = joiners[i];
						//console.log(joiner);
						$("#addFromJoiners").append( '<tr joiner="' + i + '">'
														+'<td><input type="checkbox" id="selectJoinerId" name="selectJoinerId" value="' + joiner.id + '" /></td>'
														+'<td>' + joiner.name + '</td>'
													+'</tr>');
					}
				} else {
					alert(words.loadDataFailure);
				}
			}
		});
	}

    function addSuccess(){
        $("#addJoinerForm input").val("");
        loadData();
        $("#modifyJoinerDialog").modal("hide");
        $("#joiner").modal("hide");
        <#if rc.locale=="zh_CN">
            alert("保存成功");
        <#else>
            alert("save success");
        </#if>
    }

    function addFailure(){
        <#if rc.locale=="zh_CN">
            alert("保存失败");
        <#else>
            alert("save failure");
        </#if>
    }

    var joiners = null;
    var joiner = null;
    (function ($) {
        $.fn.serializeJson = function () {
            var serializeObj = {};
            var array = this.serializeArray();
            var str = this.serialize();
            $(array).each(function () {
                if (serializeObj[this.name]) {
                    if ($.isArray(serializeObj[this.name])) {
                        serializeObj[this.name].push(this.value);
                    } else {
                        serializeObj[this.name] = [serializeObj[this.name], this.value];
                    }
                } else {
                    serializeObj[this.name] = this.value;
                }
            });
            return serializeObj;
        };
    })(jQuery);
    function loadData() {
        $("#datas").html("");
        $.ajax({
            url: "${base}/user/visa/queryVisas",
            type: "POST",
            data: {},
            dataType: "json",
            success: function (data) {
                if (data.resultCode == 0) {
                    joiners = data.rows;
					console.log(data);
					for (var i in joiners) {
						var visa = joiners[i];
						if (visa.status == 1) var status = "Submitted";
						else if (visa.status == 0 || visa.status == 2) var status = "Unsubmitted";
						else var status = "null";
                        var html = '<tr joiner="' + visa.id + '"><td>' + visa.passportName + '</td>'
                                +'<td>' + visa.passportNo + '</td>'
								+'<td>' + status + '</td>';
                        if(visa.status == 0){
                            html +='<td><button name="updateJoiner" type="button" value="' + visa.joinerId + '" class="btn btn-success" style="margin-right: 10px"><@spring.message "info.joiner.participants.table.active"/></button>';
                        }else if(visa.status == 2){
                            html +='<td><button name="activeJoiner" type="button" value="' + visa.joinerId + '" class="btn btn-success" style="margin-right: 10px"><@spring.message "info.joiner.participants.table.apply"/></button>';
                        }else{
                            html +='<td><button name="activeJoiner" type="button" class="btn btn-success" disabled="true" style="margin-right: 10px"><@spring.message "info.joiner.participants.table.active"/></button>';
                        }
							html +='<td><button name="deleteJoiner" type="button" class="btn btn-success" style="margin-right: 10px"><@spring.message "info.joiner.participants.table.cancel"/></button>';
							html+='</td>'+'</tr>';
                        $("#datas").append(html);
                    }
//                    if(joiners.length==0){
//                        $("#addContact").removeClass("hide");
//                    }
//                    $("[name='addJoiner']").click(function () {
//                        $("#addJoinerForm input").val("");
//                        var contact = joiners[parseInt($(this).parent().parent().attr("joiner"))].contact;
//                        $("[name='contactId']").val(contact.id)
//                        $("#joiner").modal();
//                    });
//                    $("[name='viewJoiner']").click(function () {
//                        joiner = joiners[parseInt($(this).parent().parent().attr("joiner"))].visa;
//                        $("#modifyJoinerForm input").val("");
//                        $("[name='id']").val(joiner.id);
//                        $("[name='eid']").val(joiner.eid);
//                        $("[name='passportName']").val(joiner.passportName);
//                        $("[name='gender']").val(joiner.gender);
//                        $("[name='nationality']").val(joiner.nationality);
//                        $("[name='jobTitle']").val(joiner.jobTitle);
//                        $("[name='companyName']").val(joiner.companyName);
//                        $("[name='boothNo']").val(joiner.boothNo);
//                        $("[name='detailedAddress']").val(joiner.detailedAddress);
//                        $("[name='tel']").val(joiner.tel);
//                        $("[name='fax']").val(joiner.fax);
//                        $("[name='email']").val(joiner.email);
//                        $("[name='companyWebsite']").val(joiner.companyWebsite);
//                        $("[name='passportNo']").val(joiner.passportNo);
//                        $("[name='expireDate']").val(joiner.expDate);
//                        $("[name='birthDay']").val(joiner.birth);
//                        $("[name='applyFor']").val(joiner.applyFor);
//                        $("[name='fromDate']").val(joiner.from);
//                        $("[name='toDate']").val(joiner.to);
//                        $("[name='businessLicense']").val(joiner.businessLicense);
//                        $("[name='passportPage']").val(joiner.passportPage);
//                        $("[name='contactId']").val(joiner.contactId);
//                        if(joiner.passportPage!=''){
//                            $("#viewPassportPage").attr("href","${base}/user/visa/visaZhengjian?type=1&vid="+joiner.id);
//                        }else{
//                            $("#viewPassportPage").attr("href","javascript:void(0)");
//                        }
//                        if(joiner.businessLicense!=''){
//                            $("#viewLicense").attr("href","${base}/user/visa/visaZhengjian?type=2&vid="+joiner.id);
//                        }else{
//                            $("#viewLicense").attr("href","javascript:void(0)");
//                        }
//                        $("#modifyJoinerDialog").modal();
//                    });

                    $("[name='activeJoiner']").click(function () {
                        //alert("--value: " + this.value);
                        $("#addJoinerId").val(this.value);
                        $("#joiner").modal();
                        $('#addFromJoiner').modal('hide');
                    });

                    $("[name='updateJoiner']").click(function () {
                        $("#addJoinerId").val(this.value);
                        $.ajax({
                            url: "${base}/user/visa/queryVisaByJoinerID",
                            type: "post",
                            dataType: "json",
                            data: {"joinerid":this.value},
                            success: function (visa) {
                                if (visa) {
                                    //$($("#addJoinerForm [name='passportName']")[0]).value = visa.passportName;
                                    $("[name='passportName']").val(visa.passportName);
                                    $("[name='gender']").val(visa.gender);
                                    $("[name='nationality']").val(visa.nationality);
                                    $("[name='passportNo']").val(visa.passportNo);
                                    $("[name='expireDate']").val(visa.expDate);
                                    $("[name='expireDate']").val(visa.expDate);
                                    $("[name='birthDay']").val(visa.birth);
                                    $("[name='applyFor']").val(visa.applyFor);
                                    $("[name='fromDate']").val(visa.from);
                                    $("[name='toDate']").val(visa.to);
                                    $("[name='hotelAddress']").val(visa.detailedAddress);
                                    $("[name='joinerId']").val(visa.joinerId);
                                    if(visa.passportPage!=''){
                                        $("#viewPassportPage").attr("href","${base}/user/visa/visaZhengjian?type=1&vid="+visa.id);
                                    }else{
                                        $("#viewPassportPage").attr("href","javascript:void(0)");
                                    }
                                    //$("#joiner").modal();
                                    $("#modifyJoinerDialog").modal();
                                    //$('#addFromJoiner').modal('hide');
                                } else {
                                    alert(words.operateFailure);
                                }
                            }
                        });
                    });

                    $("[name='deleteJoiner']").click(function () {
//						alert(parseInt($(this).parent().parent().attr("joiner")));
                        vid = parseInt($(this).parent().parent().attr("joiner"));
                        $("#confirm").modal();
                        $("#confirmDelete").click(function () {
                            $.ajax({
                                url: "${base}/user/visa/delete",
                                type: "post",
                                dataType: "json",
                                data: {"vid": vid},
                                success: function (result) {
                                    if (result.resultCode == 0) {
                                        $("#confirm").modal('hide');
                                        alert(words.operateSuccess);
                                        loadData();
                                        window.location.href = window.location.href;
                                    } else {
                                        alert(words.operateFailure);
                                    }
                                }
                            });
                        });
                    });
                } else {
                    alert(words.loadDataFailure);
                }
            }
        });
    }

    $(document).ready(function () {
        $("#leftVisa").addClass("lcurrent");
        $("#addContact").click(function(){
            window.location.href = "${base}/user/contact/index.html";
        });
        loadData();

		$("#addFromJoinerBtn").click(function () {
			loadJoiners();
			$("#addFromJoiner").modal();
		});

		$("#NextBtn").click(function () {
//			alert($('input[name="selectJoinerId"]:checked').val());
			$("#addJoinerForm input").val("");
			if(typeof $('input[name="selectJoinerId"]:checked').val() === 'undefined') {
                <#if rc.locale=="zh_CN">
				    alert("请先选择参展人员,再添加VISA.");
                <#else>
                    alert("Please fill in the participant list first. Exhibitor's Visa invitation is only provided to the participant.");
                </#if>
				return;
			}else{
                    //alert("--joinerid: " + $('input[name="selectJoinerId"]:checked').val());
                var obj = document.getElementsByName('selectJoinerId');  //选择所有name="aihao"的对象，返回数组
                //取到对象数组后，我们来循环检测它是不是被选中
                var chk = new Array();
                for(var i=0; i<obj.length; i++){
                    if(obj[i].checked){
                        chk.push(obj[i].value);
                    }
                }
				/*console.log($('input[name="selectJoinerId"]:checked').val());
				$("#addJoinerId").val($('input[name="selectJoinerId"]:checked').val());
				$("#joiner").modal();
				$('#addFromJoiner').modal('hide');*/
                $.ajax({
                    url: "${base}/user/visa/addJoinerToVisa",
                    type: "post",
                    dataType: "json",
                    data: {"joinerid": chk},
                    traditional: true,
                    success: function (data) {
                        if (data.resultCode == 0) {
                            $('#addFromJoiner').modal('hide');
                            loadData();
                        } else {
                            $.messager.alert('错误', '系统错误');
                        }
                    }
                });
			}
		});

        $("#saveJoiner").click(function () {
            var data = $("#addJoinerForm").serializeJson();
			console.log(data);
            if(data.passportName==''){
                <#if rc.locale=="zh_CN">
                    alert("户照姓名不能为空！");
                <#else>
                    alert("Passport Name can not be empty！");
                </#if>
                return;
            }
            if(data.nationality==''){
                <#if rc.locale=="zh_CN">
                alert("国籍不能为空！");
                <#else>
                alert("Nationality can not be empty！");
                </#if>
                return;
            }
            if(data.passportNo==''){
                <#if rc.locale=="zh_CN">
                alert("户照ID不能为空！");
                <#else>
                alert("Password No. can not be empty！");
                </#if>
                return;
            }
            if(data.expireDate==''){
                <#if rc.locale=="zh_CN">
                alert("户照到期时间不能为空！");
                <#else>
                alert("Expire date can not be empty！");
                </#if>
                return;
            }
            if(data.birthDay==''){
                <#if rc.locale=="zh_CN">
                alert("出生时间不能为空！");
                <#else>
                alert("Birth day can not be empty！");
                </#if>
                return;
            }
			/*if(data.address==''){
				alert("Address can not be empty！");
				return;
			}*/
            if(data.applyFor==''){
                <#if rc.locale=="zh_CN">
                alert("大使馆地址不能为空！");
                <#else>
                alert("Chinese Embassy/Consulate of (City) can not be empty！");
                </#if>
                return;
            }
            if(data.fromDate==''){
                <#if rc.locale=="zh_CN">
                alert("在华停留开始时间不能为空！");
                <#else>
                alert("Start date can not be empty！");
                </#if>
                return;
            }
            if((new Date(data.expireDate) - new Date(data.fromDate))<86400000*60){
                <#if rc.locale=="zh_CN">
                alert("户照过期时间必须比在华停留开始时间大60天");
                <#else>
                alert("Expire date must be greater than start date for 60 days ");
                </#if>
                return;
            }
            if(data.toDate==''){
                <#if rc.locale=="zh_CN">
                alert("在华停留结束时间不能为空！");
                <#else>
                alert("End date can not be empty！");
                </#if>
                return;
            }
            if(data.hotelAddress==''){
                <#if rc.locale=="zh_CN">
                alert("在厦门期间住宿的酒店不能为空！");
                <#else>
                alert("Which hotel do you book in Xiamen can not be empty！");
                </#if>
                return;
            }
            if($($("#addJoinerForm [name='passportPageFile']")[0]).val()==''){
                <#if rc.locale=="zh_CN">
                alert("请上传您的户照！");
                <#else>
                alert("Please upload your Passport Page (JPEG)");
                </#if>
                return;
            }
            $("#addJoinerForm").submit();
        });

        $("#modifyJoiner").click(function () {
            var data = $("#modifyJoinerForm").serializeJson();
			console.log(data);
            if(data.passportName==''){
                <#if rc.locale=="zh_CN">
                alert("户照姓名不能为空！");
                <#else>
                alert("Passport Name can not be empty！");
                </#if>
                return;
            }
            if(data.nationality==''){
                <#if rc.locale=="zh_CN">
                alert("国籍不能为空！");
                <#else>
                alert("Nationality can not be empty！");
                </#if>
                return;
            }
            if(data.passportNo==''){
                <#if rc.locale=="zh_CN">
                alert("户照ID不能为空！");
                <#else>
                alert("Password No. can not be empty！");
                </#if>
                return;
            }
            if(data.expireDate==''){
                <#if rc.locale=="zh_CN">
                alert("户照到期时间不能为空！");
                <#else>
                alert("Expire date can not be empty！");
                </#if>
                return;
            }
            if(data.birthDay==''){
                <#if rc.locale=="zh_CN">
                alert("出生时间不能为空！");
                <#else>
                alert("Birth day can not be empty！");
                </#if>
                return;
            }
			/*if(data.address==''){
				alert("Address can not be empty！");
				return;
			}*/
            if(data.applyFor==''){
                <#if rc.locale=="zh_CN">
                alert("大使馆地址不能为空！");
                <#else>
                alert("Chinese Embassy/Consulate of (City) can not be empty！");
                </#if>
                return;
            }
            if(data.fromDate==''){
                <#if rc.locale=="zh_CN">
                alert("在华停留开始时间不能为空！");
                <#else>
                alert("Start date can not be empty！");
                </#if>
                return;
            }
            if((new Date(data.expireDate) - new Date(data.fromDate))<86400000*60){
                <#if rc.locale=="zh_CN">
                alert("户照过期时间必须比在华停留开始时间大60天");
                <#else>
                alert("Expire date must be greater than start date for 60 days ");
                </#if>
                return;
            }
            if(data.toDate==''){
                <#if rc.locale=="zh_CN">
                alert("在华停留结束时间不能为空！");
                <#else>
                alert("End date can not be empty！");
                </#if>
                return;
            }
            if(data.hotelAddress==''){
                <#if rc.locale=="zh_CN">
                alert("在厦门期间住宿的酒店不能为空！");
                <#else>
                alert("Which hotel do you book in Xiamen can not be empty！");
                </#if>
                return;
            }
            if($($("#modifyJoinerForm [name='passportPageFile1']")[0]).val()==''){
                <#if rc.locale=="zh_CN">
                alert("请上传您的户照！");
                <#else>
                alert("Please upload your Passport Page (JPEG)");
                </#if>
                return;
            }
            $("#modifyJoinerForm").submit();
        });
    });

    function change() {
        var file = document.getElementById("passportPageFile");
        var ext = file.value.substring(file.value.lastIndexOf(".")+1).toLowerCase();
        // gif在IE浏览器暂时无法显示
        if(ext!='jpg' && ext!='jpeg'){
            <#if rc.locale=="zh_CN">
                alert("文件必须为jpg或jpeg格式图片！");
            <#else>
                alert("It only support jpeg or jpg file,thang you！");
            </#if>
            return;
        }
        if((file.offsetWidth * file.offsetHeight)/100 > 1024*1024){
            <#if rc.locale=="zh_CN">
            alert("文件大小超过1M，请重新选择图片！");
            <#else>
            alert("The file must less than 1M,thang you！");
            </#if>
            return;
        }
    }

    function change1() {
        var file = document.getElementById("passportPageFile1");
        var ext = file.value.substring(file.value.lastIndexOf(".")+1).toLowerCase();
        // gif在IE浏览器暂时无法显示
        if(ext!='jpg' && ext!='jpeg'){
        <#if rc.locale=="zh_CN">
            alert("文件必须为jpg或jpeg格式图片！");
        <#else>
            alert("It only support jpeg or jpg file,thang you！");
        </#if>
            return;
        }
        if((file.offsetWidth * file.offsetHeight)/100 > 1024*1024){
        <#if rc.locale=="zh_CN">
            alert("文件大小超过1M，请重新选择图片！");
        <#else>
            alert("The file must less than 1M,thang you！");
        </#if>
            return;
        }
    }
</script>
<!--/.container-->
<script src="${resource}/bootstrap/b2/js/bootstrap.js"></script>
</body>
</html>
